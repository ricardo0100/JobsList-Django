{% load widget_tweaks %}

{% load custom_filters %}

<script type="text/javascript">
    function salvarNovaTarefa() {
        var dados = $('#form-nova-tarefa').serialize();
        var url = '/ajax/cadastro-jobs/';
        $.ajax({
            url: url,
            data: dados,
            method: 'POST'
        }).done(function(data) {
            if(data.status == 302) {
                document.location.href = data.content;
            }else {
                var modalCadastro = $('#modal');
                modalCadastro.html(data.content);
            }
        });
    }
</script>

<form id="form-nova-tarefa">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Nova tarefa</h4>
            </div>
            <div class="modal-body">

                {{ form.non_field_errors|safe }}

                <div class="form-group">
                    <label for="{{ form.titulo.label }}">{{ form.titulo.label }}</label>
                    {{ form.titulo|add_class:"form-control" }}
                    {{ form.titulo.errors|safe }}
                </div>

                <div class="form-group">
                    <label for="{{ form.descricao.label }}">{{ form.descricao.label }}</label>
                    {{ form.descricao|add_class:"form-control" }}
                    {{ form.descricao.errors|safe }}
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary" onclick="salvarNovaTarefa()">Salvar</button>
            </div>
        </div>
    </div>
</form>
